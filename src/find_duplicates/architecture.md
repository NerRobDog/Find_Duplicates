## Декомпозиция Функций

### Основные Модули

1. **`scanner.py`**
    - **Назначение:** Сканирование целевой директории и фильтрация файлов на основе заданных шаблонов исключений.
    - **Основные Функции:**
        - `scan_directory(target_dir, exclude_patterns)`: Рекурсивно обходит директорию, исключая файлы и папки по
          шаблонам.
        - `is_excluded(filepath, exclude_patterns)`: Проверяет, соответствует ли файл одному из шаблонов исключений.

2. **`grouper.py`**
    - **Назначение:** Группировка файлов по размеру для предварительного отбора потенциальных дубликатов.
    - **Основные Функции:**
        - `group_files_by_size(file_list)`: Группирует файлы по их размеру и возвращает словарь с размерами как ключами.

3. **`hasher.py`**
    - **Назначение:** Вычисление хэшей файлов для последующего сравнения.
    - **Основные Функции:**
        - `compute_hash(filepath, hash_type)`: Вычисляет хэш файла указанного типа.
        - `get_partial_content(filepath, size=1024)`: Получает начальные и конечные байты файла для предварительного
          сравнения.

4. **`comparer.py`**
    - **Назначение:** Сравнение файлов на основе размеров, частичного содержимого, хэшей и побайтового сравнения.
    - **Основные Функции:**
        - `find_potential_duplicates(grouped_files, hash_type)`: Находит потенциальные дубликаты в сгруппированных
          файлах.
        - `compare_files(file1, file2)`: Побайтово сравнивает два файла для подтверждения их идентичности.

5. **`output.py`**
    - **Назначение:** Обработка и вывод результатов поиска дубликатов в удобном формате.
    - **Основные Функции:**
        - `write_duplicates_to_csv(duplicates, output_file)`: Записывает список дубликатов в CSV-файл.
        - `display_progress(current, total)`: Отображает прогресс выполнения задачи.

6. **`logger.py`**
    - **Назначение:** Настройка и управление системой логирования для отслеживания процесса выполнения и ошибок.
    - **Основные Функции:**
        - `setup_logger(log_level)`: Настраивает логгер с указанным уровнем детализации.

7. **`utils.py`**
    - **Назначение:** Вспомогательные утилиты и функции, используемые в других модулях.
    - **Основные Функции:**
        - `validate_directory(path)`: Проверяет, существует ли директория и доступна ли для чтения.
        - `normalize_path(path)`: Приводит путь к файлу к стандартному виду.

### Описание Функций

#### `find_duplicates.py`

**Назначение:** Главный скрипт для запуска приложения. Обрабатывает аргументы командной строки, инициализирует
логирование, вызывает необходимые функции из модулей и управляет общим процессом поиска дубликатов.

**Основные Шаги:**

1. Парсинг аргументов командной строки с помощью `argparse`.
2. Настройка логирования через `logger.py`.
3. Сканирование директории и фильтрация файлов через `scanner.py`.
4. Группировка файлов по размеру через `grouper.py`.
5. Поиск потенциальных дубликатов и их подтверждение через `comparer.py`.
6. Запись результатов в CSV-файл через `output.py`.
7. Вывод итогового сообщения о завершении процесса.

#### Пример Функциональности `find_duplicates.py`

```python
import argparse
from modules import scanner, grouper, hasher, comparer, output, logger

def main():
    # Парсинг аргументов
    args = parse_arguments()
    
    # Настройка логирования
    logger.setup_logger(args.log_level)
    
    # Проверка директории
    if not utils.validate_directory(args.directory):
        logging.error(f"Директория '{args.directory}' не найдена или недоступна.")
        return
    
    # Сканирование и фильтрация файлов
    files = scanner.scan_directory(args.directory, args.exclude)
    
    # Группировка файлов по размеру
    grouped_files = grouper.group_files_by_size(files)
    
    # Поиск и подтверждение дубликатов
    duplicates = comparer.find_potential_duplicates(grouped_files, args.hash_type)
    
    # Запись результатов
    output.write_duplicates_to_csv(duplicates, args.output)
    
    logging.info(f"✅ Поиск завершен! Результаты сохранены в '{args.output}'.")

if __name__ == "__main__":
    main()